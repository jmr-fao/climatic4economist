% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_pct_spell.R
\name{calc_pct_spell}
\alias{calc_pct_spell}
\title{Compute spell percentiles and summary statistics}
\usage{
calc_pct_spell(extr_day, p, min_spell = 2)
}
\arguments{
\item{p}{A numeric vector of probabilities (e.g., \code{c(0.1, 0.5, 0.9)})
representing the percentiles to compute.}

\item{df}{A data frame containing precipitation data with an \code{ID} column
and daily precipitation values.}

\item{dry_treshold}{A numeric value (default = 0.1) defining the precipitation
threshold below which a day is considered dry.}
}
\value{
A data frame containing:
\itemize{
\item \code{dry_day_mean}: Average proportion of dry days in each month.
\item \code{dry_spell_mean}: Mean duration of dry spells per month.
\item \code{dry_spell_sd}: Standard deviation of dry spell duration.
\item \code{dry_spell_Xp}: Dry spell duration at the specified percentile \code{Xp}.
}
}
\description{
This function calculates dry spell statistics, including mean, standard deviation,
and selected percentiles, for each month within a given dataset.
}
\details{
The function follows these steps:
\enumerate{
\item Reshapes \code{df} from wide to long format, extracting date and precipitation values.
\item Converts the \code{date} column into a proper date object and extracts the \code{month}.
\item Identifies dry days based on \code{dry_treshold} and computes dry spell durations.
\item Calculates monthly summary statistics (\code{mean}, \code{sd}) for dry spells.
\item Computes dry spell percentiles as specified by \code{p}.
\item Merges all computed metrics into a single output table.
}
}
\examples{
# Example dataset
df <- data.frame(
  ID = rep(1:3, each = 10),
  `2000` = runif(30, 0, 5),
  `2001` = runif(30, 0, 5),
  `2002` = runif(30, 0, 5)
)

calc_pct_spell(df, p = c(0.1, 0.5, 0.9))
}
